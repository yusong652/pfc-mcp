{
  "command": "measure dump",
  "category": "measure",
  "search_keywords": [
    "dump",
    "export",
    "distribution"
  ],
  "description": "Dump the cumulative size distribution data from a measurement region. The size distribution must have been configured using the bins keyword in measure create or measure modify. Data can be exported to a PFC table for further analysis or plotting.",
  "syntax": "measure dump id <i> <keyword>",
  "keywords": [
    {
      "name": "table",
      "syntax": "table <itab>",
      "description": "Dump the information into table with ID itab. The table will be created if it doesn't exist, or overwritten if it already exists.",
      "required": false,
      "parameters": [
        {
          "name": "itab",
          "type": "integer",
          "required": true,
          "description": "Table ID where data will be stored"
        }
      ]
    },
    {
      "name": "file",
      "syntax": "file <s>",
      "description": "Dump information into a file with name s. WARNING: This feature is not available yet.",
      "required": false,
      "parameters": [
        {
          "name": "s",
          "type": "string",
          "required": true,
          "description": "Filename for data export"
        }
      ],
      "availability": "not_available"
    }
  ],
  "notes": [
    "Exports cumulative size distribution data calculated from measurement region",
    "Requires bins keyword to have been specified in measure create or measure modify",
    "id parameter is REQUIRED - must specify which measurement to dump",
    "table keyword creates or overwrites PFC table with data",
    "file keyword is NOT YET AVAILABLE - use table instead",
    "Table contains bin boundaries and cumulative volume percentages",
    "Data suitable for plotting particle size distribution curves",
    "Must call model clean before dump to ensure data is calculated",
    "Table format: bin edge vs. cumulative volume percentage"
  ],
  "examples": [
    {
      "command": "measure create id 1 bins 100 0.0 0.50 radius 4.0\nmeasure dump id 1 table 1",
      "description": "Create measurement with 100 bins, dump size distribution to table 1",
      "use_case": "Example from documentation - basic size distribution export"
    },
    {
      "command": "measure create id 2 bins 50 0.1 1.0 radius 5.0\nmodel clean\nmeasure dump id 2 table 2",
      "description": "Create measurement, calculate, then dump to table 2",
      "use_case": "Complete workflow with calculation step"
    },
    {
      "command": "measure dump id 1 table 10",
      "description": "Dump existing measurement 1 to table 10",
      "use_case": "Export previously created measurement data"
    },
    {
      "command": "measure create id 1 bins 100 0.0 0.5 radius 4.0\nmodel clean\nmeasure dump id 1 table 1\ntable 1 export 'size_dist.txt'",
      "description": "Create, calculate, dump to table, then export table to text file",
      "use_case": "Complete data export to external file"
    },
    {
      "command": "measure modify id 1 bins 200 0.0 1.0\nmodel clean\nmeasure dump id 1 table 1",
      "description": "Modify bins for finer resolution, recalculate, re-dump",
      "use_case": "Refine and re-export size distribution"
    }
  ],
  "python_sdk_alternative": {
    "available": true,
    "notes": [
      "Python SDK can access table data after measure dump",
      "Can query measurement properties directly via Python",
      "measure dump + table export provides standardized data format",
      "Python useful for programmatic data processing"
    ],
    "command_vs_python": {
      "command": "measure dump id 1 table 1\ntable 1 export 'data.txt'",
      "python": "# Python SDK can access measurement data\n# Consult PFC documentation for exact methods"
    }
  },
  "related_commands": [
    "measure create",
    "measure list",
    "measure modify",
    "model clean",
    "table export"
  ],
  "common_use_cases": [
    {
      "use_case": "Export particle size distribution for plotting",
      "workflow": [
        "1. Create measurement with bins: measure create id 1 bins 100 0.0 1.0 radius 5.0",
        "2. Calculate: model clean",
        "3. Export to table: measure dump id 1 table 1",
        "4. Export table to file: table 1 export 'psd.txt'",
        "5. Plot cumulative volume % vs. diameter in external tool"
      ],
      "notes": "Standard workflow for particle size distribution analysis"
    },
    {
      "use_case": "Compare size distributions at different locations",
      "workflow": [
        "1. Create region 1: measure create id 1 bins 100 0.0 1.0 position (0,0,0) radius 3.0",
        "2. Create region 2: measure create id 2 bins 100 0.0 1.0 position (10,0,0) radius 3.0",
        "3. Calculate: model clean",
        "4. Dump region 1: measure dump id 1 table 1",
        "5. Dump region 2: measure dump id 2 table 2",
        "6. Compare distributions between locations"
      ],
      "notes": "Spatial variation in particle sizes"
    },
    {
      "use_case": "Track size distribution evolution during simulation",
      "workflow": [
        "1. Setup: measure create id 1 bins 100 0.0 1.0 radius 5.0",
        "2. Initial state: model clean, measure dump id 1 table 1",
        "3. Run simulation: model cycle 5000",
        "4. After loading: model clean, measure dump id 1 table 2",
        "5. Compare table 1 vs. table 2 for changes"
      ],
      "notes": "Monitor particle breakage or agglomeration"
    },
    {
      "use_case": "Refine size distribution resolution",
      "workflow": [
        "1. Coarse initial: measure create id 1 bins 50 0.0 1.0 radius 5.0",
        "2. Calculate and dump: model clean, measure dump id 1 table 1",
        "3. Need finer: measure modify id 1 bins 200 0.0 1.0",
        "4. Recalculate: model clean, measure dump id 1 table 2",
        "5. Compare coarse (table 1) vs. fine (table 2) resolution"
      ],
      "notes": "Determine appropriate bin count for analysis"
    }
  ],
  "typical_workflow": [
    "1. Create measurement with bins: measure create id <i> bins <n> <fl> <fh> radius <r>",
    "2. Calculate: model clean",
    "3. Dump to table: measure dump id <i> table <itab>",
    "4. Export table: table <itab> export 'filename.txt'",
    "5. Analyze/plot in external tools"
  ],
  "bins_requirement": {
    "description": "measure dump requires bins to be specified",
    "why": "Size distribution calculation requires bin configuration",
    "how_to_specify": "Use bins keyword in measure create or measure modify",
    "error_if_missing": "dump may fail or produce no data if bins not configured",
    "example": "measure create id 1 bins 100 0.0 0.5 radius 4.0"
  },
  "table_output_format": {
    "description": "Structure of exported table data",
    "columns": [
      {
        "name": "Bin edge (diameter)",
        "description": "Lower boundary of each bin (volume-equivalent sphere diameter)",
        "units": "Model length units"
      },
      {
        "name": "Cumulative volume percentage",
        "description": "Percentage of total volume with diameter ≤ bin edge",
        "range": "0 to 1 (0% to 100%)"
      }
    ],
    "note": "Percentage for a bin is given with the entry holding the lower bin boundary",
    "typical_use": "Plot cumulative % vs. diameter for size distribution curve"
  },
  "cumulative_distribution": {
    "description": "What cumulative size distribution means",
    "definition": "Percentage of total particle volume with diameter less than or equal to specified size",
    "range": "0 (0%) to 1 (100%)",
    "curve_shape": "Monotonically increasing from 0 to 1",
    "interpretation": [
      "At diameter d: cumulative % = fraction of volume in particles with diameter ≤ d",
      "Steep slope = many particles in that size range",
      "Flat region = few particles in that size range"
    ],
    "example": "0.5 at diameter 0.3 means 50% of volume in particles ≤ 0.3 diameter"
  },
  "table_creation_overwrite": {
    "description": "How measure dump handles tables",
    "table_exists": "Overwrites existing table with new data",
    "table_new": "Creates new table with specified ID",
    "no_warning": "No warning when overwriting - data replaced silently",
    "recommendation": "Use unique table IDs or check before dumping to avoid accidental overwrites"
  },
  "file_keyword_unavailable": {
    "description": "file keyword is not yet implemented",
    "status": "Not available",
    "workaround": [
      "1. Use table keyword instead: measure dump id 1 table 1",
      "2. Export table to file: table 1 export 'filename.txt'",
      "3. Two-step process achieves same result"
    ],
    "future": "May be implemented in future PFC versions"
  },
  "warnings": [
    {
      "type": "bins_required",
      "message": "measure dump requires bins to be configured in measure create/modify",
      "severity": "HIGH",
      "mitigation": "Always specify bins keyword when creating measurement for size distribution"
    },
    {
      "type": "calculation_required",
      "message": "Must call model clean before measure dump to calculate size distribution",
      "severity": "MEDIUM",
      "mitigation": "Always call model clean after creating measurement, before dumping"
    },
    {
      "type": "table_overwrite",
      "message": "measure dump overwrites existing table without warning",
      "severity": "MEDIUM",
      "mitigation": "Use unique table IDs or verify before dumping to avoid data loss"
    },
    {
      "type": "file_not_available",
      "message": "file keyword is not yet available - use table instead",
      "severity": "LOW",
      "mitigation": "Use table keyword + table export for file output"
    },
    {
      "type": "id_required",
      "message": "id parameter is required - must specify which measurement to dump",
      "severity": "HIGH",
      "mitigation": "Always specify 'id <i>' when using measure dump"
    }
  ],
  "troubleshooting": [
    {
      "issue": "measure dump fails or produces no data",
      "solutions": [
        "Verify bins were specified: measure list to check configuration",
        "If bins missing: measure modify id <i> bins <n> <fl> <fh>",
        "Call model clean to calculate size distribution",
        "Verify measurement ID exists: measure list",
        "Check if measurement region contains bodies"
      ]
    },
    {
      "issue": "Table contains unexpected data",
      "solutions": [
        "Verify correct measurement ID was specified",
        "Check if model clean was called to recalculate",
        "Verify bin configuration is correct: measure list",
        "Ensure measurement region contains bodies: check position/radius"
      ]
    },
    {
      "issue": "Want to export to file directly",
      "solutions": [
        "file keyword not yet available",
        "Use two-step process:",
        "  1. measure dump id 1 table 1",
        "  2. table 1 export 'filename.txt'",
        "This achieves same result"
      ]
    },
    {
      "issue": "Accidentally overwrote important table",
      "solutions": [
        "measure dump overwrites without warning",
        "Cannot recover overwritten table",
        "Prevention: use unique table IDs",
        "Or: export table to file before re-dumping"
      ]
    },
    {
      "issue": "Size distribution looks wrong",
      "solutions": [
        "Check bin range (fl to fh) covers actual particle sizes",
        "Verify measurement region contains representative particles",
        "Increase bin count for smoother distribution",
        "Call model clean before dump to ensure current data"
      ]
    }
  ],
  "performance_considerations": {
    "dump_cost": "Very fast - just exports already-calculated data",
    "calculation_cost": "Size distribution calculated during model clean",
    "table_size": "Proportional to number of bins",
    "recommendation": "Dumping is inexpensive - main cost is model clean calculation"
  },
  "dump_vs_list": {
    "measure_dump": {
      "function": "Export size distribution data to table",
      "output": "Structured data (bin edges, cumulative percentages)",
      "format": "PFC table suitable for export/plotting",
      "data": "Size distribution only",
      "use_when": "Need to export/plot size distribution"
    },
    "measure_list": {
      "function": "Display measurement information in console",
      "output": "Human-readable text",
      "format": "Console output",
      "data": "All measurement properties (porosity, stress, etc.)",
      "use_when": "Quick inspection of all measurement data"
    },
    "recommendation": "Use list for viewing, dump for exporting size distributions"
  },
  "when_to_use_dump": {
    "good_use_cases": [
      "Exporting particle size distribution for external analysis",
      "Creating plots of cumulative distribution curves",
      "Comparing size distributions between regions or time steps",
      "Archiving size distribution data",
      "Quantitative analysis of particle sizes"
    ],
    "not_needed_for": [
      "Viewing porosity, stress, strain (use measure list)",
      "Quick verification of measurements (use measure list)",
      "Measurements without bins configured (no size distribution)"
    ]
  },
  "table_export_workflow": {
    "description": "Complete workflow to export size distribution to file",
    "steps": [
      {
        "step": 1,
        "command": "measure create id 1 bins 100 0.0 1.0 radius 5.0",
        "action": "Create measurement with size distribution bins"
      },
      {
        "step": 2,
        "command": "model clean",
        "action": "Calculate size distribution"
      },
      {
        "step": 3,
        "command": "measure dump id 1 table 1",
        "action": "Dump data to PFC table"
      },
      {
        "step": 4,
        "command": "table 1 export 'size_distribution.txt'",
        "action": "Export table to text file"
      },
      {
        "step": 5,
        "action": "Import file into Excel, Python, MATLAB, etc. for plotting"
      }
    ]
  },
  "multiple_measurements_dumping": {
    "description": "Dumping data from multiple measurements",
    "approach": "Use different table IDs for each measurement",
    "example": [
      "measure dump id 1 table 1",
      "measure dump id 2 table 2",
      "measure dump id 3 table 3"
    ],
    "benefit": "Preserve all data; can compare in same or separate files",
    "export": [
      "table 1 export 'region1_psd.txt'",
      "table 2 export 'region2_psd.txt'",
      "table 3 export 'region3_psd.txt'"
    ]
  },
  "size_distribution_interpretation": {
    "description": "How to interpret dumped size distribution data",
    "x_axis": "Particle diameter (volume-equivalent sphere)",
    "y_axis": "Cumulative volume percentage (0 to 1)",
    "d50": "Median particle size - diameter at 50% cumulative volume",
    "d10_d90": "10th and 90th percentile diameters - measure of distribution width",
    "steep_slope": "Narrow size distribution (uniform particles)",
    "gradual_slope": "Wide size distribution (varied particle sizes)",
    "example_analysis": "If d50 = 0.3, then half of particle volume is in particles ≤ 0.3 diameter"
  }
}
