{
  "command": "model save",
  "category": "model",
  "search_keywords": [
    "save",
    "file"
  ],
  "description": "Save all model-state information. The file s is created and, if no extension is provided, the extension is set to '.sav'. This information includes any defined FISH functions/variables, histories, tables, and other model components. The inputdir and localdir keywords can be placed after s to specify the location of the save file relative to the calling file or the project file. A saved model state can be re-activated via the 'model restore' command.",
  "syntax": "model save <s> <keyword>",
  "keywords": [
    {
      "name": "compress",
      "syntax": "compress",
      "description": "Automatically compresses the save file after creation. This takes additional time, but can remove up to 75% of the file size on disk. The file will be automatically uncompressed on restore"
    },
    {
      "name": "nocompress",
      "syntax": "nocompress",
      "description": "If a save file that was previously compressed is over-written, it will be automatically compressed again. Use this option to suppress that and save an uncompressed file over it"
    },
    {
      "name": "readonly",
      "syntax": "readonly",
      "description": "Mark the save file as read only. If restored, the model will be restricted from cycling and certain other modifications"
    },
    {
      "name": "text",
      "syntax": "text",
      "description": "Output the save file as a Unicode text file in JSON format. Note: this will significantly increase both the size of the file and the amount of time required to save and restore the model. This option is INCOMPATIBLE with the 'readonly' and 'compress' keywords"
    },
    {
      "name": "inputdir",
      "syntax": "inputdir",
      "description": "Specify the location of the save file relative to the calling file"
    },
    {
      "name": "localdir",
      "syntax": "localdir",
      "description": "Specify the location of the save file relative to the project file"
    }
  ],
  "notes": [
    "Default file extension: '.sav' (added if not specified)",
    "Saves ALL model-state information:",
    "  - All FISH functions and variables",
    "  - All histories",
    "  - All tables",
    "  - All model components (balls, clumps, walls, contacts, etc.)",
    "  - Domain settings",
    "  - Material properties",
    "  - Gravity settings",
    "  - All other model configuration",
    "compress keyword: reduces file size up to 75%, auto-uncompresses on restore, takes extra time",
    "nocompress keyword: suppresses auto-compression when overwriting previously compressed file",
    "readonly keyword: restricts restored model from cycling and modifications (useful for archival)",
    "text keyword: outputs Unicode JSON format (LARGE files, SLOW save/restore, human-readable)",
    "text keyword is INCOMPATIBLE with readonly and compress",
    "inputdir/localdir: control save location relative to calling/project file",
    "Complement command: 'model restore' restores saved state",
    "Use for: checkpointing, archiving, creating restart points, saving results"
  ],
  "examples": [
    {
      "command": "model save 'checkpoint.sav'",
      "description": "Save model to checkpoint file (explicit extension)"
    },
    {
      "command": "model save 'checkpoint'",
      "description": "Save model (extension '.sav' added automatically)"
    },
    {
      "command": "model save 'checkpoint' compress",
      "description": "Save and compress (reduces file size by up to 75%)"
    },
    {
      "command": "model save 'final_results' readonly",
      "description": "Save as read-only for archival (cannot cycle after restore)"
    },
    {
      "command": "model save 'debug_state' text",
      "description": "Save as human-readable JSON text (large file, slow)"
    },
    {
      "command": "model save 'equilibrium' compress",
      "description": "Save compressed equilibrium state"
    },
    {
      "command": "model save 'state_uncompressed' nocompress",
      "description": "Overwrite previously compressed file without compression"
    },
    {
      "command": "model solve\nmodel save 'after_solve_equilibrium'",
      "description": "Solve to equilibrium and save state"
    },
    {
      "command": "model cycle 1000\nmodel save 'checkpoint_1000'\nmodel cycle 1000\nmodel save 'checkpoint_2000'",
      "description": "Save checkpoints at different cycle counts"
    },
    {
      "command": "model save 'C:/simulations/results/final_state.sav' compress",
      "description": "Save to absolute path with compression"
    },
    {
      "command": "model save './saves/backup' inputdir",
      "description": "Save relative to calling file location"
    },
    {
      "command": "model save 'archive/production_run' localdir readonly compress",
      "description": "Save relative to project, read-only and compressed for archival"
    }
  ],
  "python_sdk_alternative": {
    "available": false,
    "workaround": "itasca.command('model save \"filename.sav\"') or itasca.command('model save \"filename\" compress') - Python SDK does not provide direct save function. Note: Use double quotes around filename in command string if path contains spaces"
  }
}
