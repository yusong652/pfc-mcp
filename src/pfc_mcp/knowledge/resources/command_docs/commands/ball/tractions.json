{
  "command": "ball tractions",
  "category": "ball",
  "search_keywords": [
    "stress",
    "initialization",
    "voronoi"
  ],
  "description": "Compute contact tractions consistent with prescribed stress state using Voronoi tessellation. Computes ball volumes, surface areas, and contact forces based on constant stress tensor or gravitational stress. By default, updates ball positions and volumes to match Voronoi cells, and can create contacts between adjacent cells. Uses Voro++ library for tessellation. Useful for initializing in-situ stress states in geomechanics simulations.",
  "syntax": "ball tractions <keyword> ... <range>",
  "keywords": [
    {
      "name": "constant",
      "syntax": "constant <f1> <f2> <f3> <f4> <f5> <f6> (3D) or <f1> <f2> <f3> (2D)",
      "description": "Set constant stress tensor components. 3D: sxx, syy, szz, sxy, sxz, syz. 2D: sxx, syy, sxy. All components can be 0 to null forces and set connectivity/areas."
    },
    {
      "name": "ratio",
      "syntax": "ratio <f> <fy> (optional, 3D)",
      "description": "Set vertical to horizontal stress ratio. If fy given, different ratios for local x and y directions (use with direction-x). Cannot use with constant."
    },
    {
      "name": "overburden",
      "syntax": "overburden <f>",
      "description": "Add overburden stress (typically negative for compression) when model boundary doesn't represent surface. Cannot use with constant."
    },
    {
      "name": "layered",
      "syntax": "layered <b>",
      "description": "Compute overburden by integrating density above each contact (for non-uniform density/boundaries). Cannot use with constant. Default: false"
    },
    {
      "name": "extra",
      "syntax": "extra <i>",
      "description": "Use stress tensor stored at extra variable index i"
    },
    {
      "name": "direction-x",
      "syntax": "direction-x <v> (3D)",
      "description": "Specify local x-direction when using two-parameter ratio. Y-direction computed from x and gravity. Cannot use with constant. Default: (1,0,0)"
    },
    {
      "name": "contact-create",
      "syntax": "contact-create <b>",
      "description": "Create ball-ball and ball-facet contacts between adjacent Voronoi cells. Default: false"
    },
    {
      "name": "contact-active",
      "syntax": "contact-active <b>",
      "description": "Set forces only for active contacts (true) or all contacts (false). Default: true"
    },
    {
      "name": "update-position",
      "syntax": "update-position <b>",
      "description": "Update ball positions to Voronoi cell centroids. Default: true"
    },
    {
      "name": "update-volume",
      "syntax": "update-volume <b>",
      "description": "Update ball volumes to Voronoi cell volumes. Default: true"
    },
    {
      "name": "update-area",
      "syntax": "update-area <b>",
      "description": "Update contact areas (sets user_area property if supported). Default: true"
    },
    {
      "name": "polydisperse",
      "syntax": "polydisperse <b>",
      "description": "Use radical Voronoi (Laguerre) tessellation weighted by ball radii (true) vs standard Voronoi (false). Default: true"
    },
    {
      "name": "periodicity",
      "syntax": "periodicity <bx> <by> <bz> (z in 3D)",
      "description": "Assume periodic boundary conditions in each direction during tessellation"
    },
    {
      "name": "angular-tolerance",
      "syntax": "angular-tolerance <f>",
      "description": "Angular tolerance (degrees) for ball-facet identification. Contact area set if normal within f degrees of Voronoi cell normal. Default: 10"
    },
    {
      "name": "boundary-group",
      "syntax": "boundary-group <s> slot <slot>",
      "description": "Assign group name s to balls with contacts at Voronoi region boundaries. Useful for identifying model boundaries. Default slot: 'Default'"
    }
  ],
  "examples": [
    {
      "command": "ball tractions constant -1e6 -1e6 -1e6 0 0 0",
      "description": "Set isotropic stress state (-1 MPa) using Voronoi tessellation"
    },
    {
      "command": "ball tractions constant 0 0 0 0 0 0",
      "description": "Null all forces and set Voronoi contact connectivity/areas"
    },
    {
      "command": "ball tractions ratio 0.5",
      "description": "Set gravitational stress with K0 = 0.5 (horizontal = 0.5 Ã— vertical)"
    },
    {
      "command": "ball tractions ratio 0.5 overburden -5e5",
      "description": "Apply K0 = 0.5 with 500 kPa overburden stress"
    },
    {
      "command": "ball tractions layered true ratio 0.7",
      "description": "Compute layered overburden for non-uniform density distribution"
    },
    {
      "command": "ball tractions constant -2e6 -2e6 -2e6 0 0 0 contact-create true",
      "description": "Set stress and create contacts between adjacent Voronoi cells"
    },
    {
      "command": "ball tractions ratio 0.6 boundary-group 'boundary' slot 'location'",
      "description": "Apply stress and tag boundary balls for subsequent operations"
    }
  ],
  "python_sdk_alternative": {
    "available": false,
    "workaround": "itasca.command('ball tractions ...') - Python SDK does not provide Voronoi-based traction computation"
  }
}
