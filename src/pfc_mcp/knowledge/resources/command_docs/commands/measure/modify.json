{
  "command": "measure modify",
  "category": "measure",
  "search_keywords": ["modify", "update"],
  "description": "Modify measurement region attributes. The ID must be specified to identify which measurement to modify. An error is thrown if no measurement region exists with the specified ID. Only specified attributes are changed; unspecified attributes retain their previous values. After modification, measurements must be recalculated with model clean.",

  "syntax": "measure modify <keyword> ...",

  "keywords": [
    {
      "name": "id",
      "syntax": "id <i>",
      "description": "Specify the ID of the measurement to modify. REQUIRED - must always be specified.",
      "required": true,
      "parameters": [
        {
          "name": "i",
          "type": "integer",
          "required": true,
          "description": "Measurement ID to modify"
        }
      ]
    },
    {
      "name": "position",
      "syntax": "position <v>",
      "description": "Modify the position of the center of the measurement region (vector form).",
      "required": false,
      "parameters": [
        {
          "name": "v",
          "type": "vector",
          "required": true,
          "description": "Vector specifying (x,y,z) coordinates"
        }
      ]
    },
    {
      "name": "x",
      "syntax": "x <f>",
      "description": "Modify the x-coordinate of the center of the measurement region.",
      "required": false,
      "parameters": [
        {
          "name": "f",
          "type": "float",
          "required": true,
          "description": "New x-coordinate value"
        }
      ]
    },
    {
      "name": "y",
      "syntax": "y <f>",
      "description": "Modify the y-coordinate of the center of the measurement region.",
      "required": false,
      "parameters": [
        {
          "name": "f",
          "type": "float",
          "required": true,
          "description": "New y-coordinate value"
        }
      ]
    },
    {
      "name": "z",
      "syntax": "z <f>",
      "description": "Modify the z-coordinate of the center of the measurement region (3D only).",
      "required": false,
      "parameters": [
        {
          "name": "f",
          "type": "float",
          "required": true,
          "description": "New z-coordinate value"
        }
      ]
    },
    {
      "name": "radius",
      "syntax": "radius <f>",
      "description": "Modify the radius of the measurement region (disk in 2D, sphere in 3D).",
      "required": false,
      "parameters": [
        {
          "name": "f",
          "type": "float",
          "required": true,
          "description": "New radius value"
        }
      ]
    },
    {
      "name": "bins",
      "syntax": "bins <i> <fl> <fh>",
      "description": "Modify the number of bins and bin edges for size distribution calculation. Bodies are binned by volume-equivalent sphere diameter (3D) or area-equivalent circle diameter (2D). Cumulative volume percentage can be exported with measure dump.",
      "required": false,
      "parameters": [
        {
          "name": "i",
          "type": "integer",
          "required": true,
          "description": "New number of bins"
        },
        {
          "name": "fl",
          "type": "float",
          "required": true,
          "description": "New lowest bin edge"
        },
        {
          "name": "fh",
          "type": "float",
          "required": true,
          "description": "New highest bin edge"
        }
      ]
    },
    {
      "name": "tolerance",
      "syntax": "tolerance <f>",
      "description": "Modify the relative tolerance for accumulating the volume of bodies that intersect the measurement region boundary in the porosity calculation. Bodies completely within the region are fully counted.",
      "required": false,
      "parameters": [
        {
          "name": "f",
          "type": "float",
          "required": true,
          "description": "New tolerance value (e.g., 0.01 for 1%)"
        }
      ]
    }
  ],

  "notes": [
    "id keyword is REQUIRED - must specify which measurement to modify",
    "Error thrown if specified ID does not exist",
    "Only specified attributes are changed - others retain previous values",
    "After modification, call model clean to recalculate with new parameters",
    "Can modify multiple attributes in single command",
    "Cannot change ID itself - use delete/create to reassign ID",
    "More efficient than delete/create when keeping same ID",
    "Position can be specified as vector (position) or components (x/y/z)",
    "Modifying position or radius changes which bodies are in measurement region",
    "Modifying tolerance affects porosity calculation accuracy",
    "Modifying bins affects size distribution resolution"
  ],

  "examples": [
    {
      "command": "measure modify id 1 radius 4.0",
      "description": "Change radius of measurement 1 to 4.0, keep other attributes",
      "use_case": "Adjust measurement region size"
    },
    {
      "command": "measure modify id 1 radius 4.0 x 2.0 y 2.0 z 2.0 tolerance 0.0",
      "description": "Modify multiple attributes: radius, position, and tolerance",
      "use_case": "Comprehensive reconfiguration (example from documentation)"
    },
    {
      "command": "measure modify id 2 position (5.0, 3.0, 2.0)",
      "description": "Move measurement 2 to new position using vector notation",
      "use_case": "Relocate measurement region"
    },
    {
      "command": "measure modify id 1 x 10.0",
      "description": "Change only x-coordinate, keep y and z unchanged",
      "use_case": "Adjust single coordinate component"
    },
    {
      "command": "measure modify id 3 bins 200 0.0 1.0",
      "description": "Change size distribution to 200 bins from 0.0 to 1.0",
      "use_case": "Increase resolution of particle size distribution"
    },
    {
      "command": "measure modify id 1 tolerance 0.001\nmodel clean\nmeasure list",
      "description": "Increase precision, recalculate, view updated results",
      "use_case": "Refine porosity calculation accuracy"
    },
    {
      "command": "measure list\nmeasure modify id 1 radius 6.0\nmodel clean\nmeasure list",
      "description": "View before, modify, recalculate, view after",
      "use_case": "Before/after comparison workflow"
    }
  ],

  "python_sdk_alternative": {
    "available": true,
    "notes": [
      "Python SDK likely has methods to modify measurement properties",
      "Command interface provides simpler syntax for modifications",
      "Exact Python method signatures - consult PFC documentation"
    ],
    "command_vs_python": {
      "command": "measure modify id 1 radius 4.0 tolerance 0.001",
      "python": "# Python SDK approach - consult PFC documentation\n# itasca.measure module provides modification functionality"
    }
  },

  "related_commands": [
    "measure create",
    "measure delete",
    "measure list",
    "model clean"
  ],

  "common_use_cases": [
    {
      "use_case": "Adjust measurement region size",
      "workflow": [
        "1. Initial measurement too small: measure create id 1 radius 2.0",
        "2. Increase size: measure modify id 1 radius 5.0",
        "3. Recalculate: model clean",
        "4. Verify: measure list"
      ],
      "notes": "More convenient than delete/recreate"
    },
    {
      "use_case": "Move measurement to different location",
      "workflow": [
        "1. Original location: measure create id 1 position (0,0,0)",
        "2. Relocate: measure modify id 1 position (10,5,0)",
        "3. Recalculate: model clean",
        "4. Compare results at different locations"
      ],
      "notes": "Useful for spatial property mapping"
    },
    {
      "use_case": "Refine tolerance for high-precision porosity",
      "workflow": [
        "1. Start with default: measure create id 1 radius 5.0",
        "2. Need higher precision: measure modify id 1 tolerance 0.001",
        "3. Recalculate: model clean",
        "4. More accurate porosity now available"
      ],
      "notes": "Balance accuracy vs. computation time"
    },
    {
      "use_case": "Adjust size distribution resolution",
      "workflow": [
        "1. Initial coarse bins: measure create id 1 bins 50 0.0 1.0",
        "2. Need finer resolution: measure modify id 1 bins 200 0.0 1.0",
        "3. Recalculate: model clean",
        "4. Export: measure dump for detailed distribution"
      ],
      "notes": "Improve size distribution curve smoothness"
    }
  ],

  "typical_workflow": [
    "1. Check current state: measure list",
    "2. Modify attributes: measure modify id <i> <changes>",
    "3. Recalculate: model clean",
    "4. Verify changes: measure list",
    "5. Export if needed: measure dump"
  ],

  "modify_vs_delete_recreate": {
    "measure_modify": {
      "advantages": [
        "Keeps same ID",
        "Single command for changes",
        "Clearer intent (modification vs. replacement)",
        "May preserve measurement history (if applicable)"
      ],
      "disadvantages": [
        "Must specify ID each time",
        "Cannot change ID itself"
      ],
      "when_to_use": "Adjust existing measurement parameters"
    },
    "delete_recreate": {
      "advantages": [
        "Can change ID",
        "Complete fresh start",
        "Clear separation of old/new configuration"
      ],
      "disadvantages": [
        "Two commands required",
        "Loses measurement history",
        "More typing"
      ],
      "when_to_use": "Complete reconfiguration or ID change needed"
    },
    "recommendation": "Use modify for parameter adjustments; delete/recreate only if changing ID"
  },

  "partial_modification": {
    "description": "Only specified attributes are changed",
    "example": "measure modify id 1 radius 6.0 leaves position, tolerance, bins unchanged",
    "benefits": [
      "No need to re-specify all parameters",
      "Less typing",
      "Clear what's being changed"
    ],
    "verification": "Use measure list before and after to see what changed"
  },

  "recalculation_requirement": {
    "description": "Measurements must be recalculated after modification",
    "why": "Modification only changes configuration, not calculated values",
    "how": "Call model clean to trigger recalculation",
    "values_before_recalculation": "Old values remain until model clean called",
    "typical_sequence": [
      "1. measure modify id 1 radius 5.0",
      "2. model clean (recalculate with new radius)",
      "3. measure list (view updated results)"
    ]
  },

  "position_modification_methods": {
    "vector_form": {
      "syntax": "position (x, y, z)",
      "example": "measure modify id 1 position (5.0, 3.0, 2.0)",
      "use_when": "Setting all coordinates at once"
    },
    "component_form": {
      "syntax": "x <f> y <f> z <f>",
      "example": "measure modify id 1 x 5.0 y 3.0 z 2.0",
      "use_when": "Setting individual coordinates"
    },
    "partial_component": {
      "syntax": "x <f> (omit y, z)",
      "example": "measure modify id 1 x 10.0",
      "effect": "Changes only x, keeps y and z unchanged",
      "use_when": "Adjusting single coordinate"
    },
    "note": "Cannot mix position vector and x/y/z components in same command - choose one form"
  },

  "attribute_preservation": {
    "description": "Unspecified attributes retain their previous values",
    "examples": [
      {
        "command": "measure modify id 1 radius 5.0",
        "unchanged": "position, tolerance, bins"
      },
      {
        "command": "measure modify id 1 x 10.0",
        "unchanged": "y, z, radius, tolerance, bins"
      },
      {
        "command": "measure modify id 1 tolerance 0.001",
        "unchanged": "position, radius, bins"
      }
    ],
    "recommendation": "Only specify what you want to change"
  },

  "warnings": [
    {
      "type": "id_required",
      "message": "id keyword is REQUIRED - command fails if omitted",
      "severity": "HIGH",
      "mitigation": "Always specify 'id <i>' when using measure modify"
    },
    {
      "type": "id_must_exist",
      "message": "Error thrown if specified ID does not exist",
      "severity": "MEDIUM",
      "mitigation": "Use measure list to verify ID exists before modifying"
    },
    {
      "type": "recalculation_required",
      "message": "Modifications don't take effect until model clean is called",
      "severity": "MEDIUM",
      "mitigation": "Always call model clean after measure modify to see updated results"
    },
    {
      "type": "cannot_change_id",
      "message": "Cannot modify the ID itself - use delete/create to change ID",
      "severity": "LOW",
      "mitigation": "Delete old measurement and create new one if ID change needed"
    }
  ],

  "troubleshooting": [
    {
      "issue": "measure modify fails with error",
      "solutions": [
        "Check if id keyword specified - it's required",
        "Verify ID exists: measure list",
        "If ID doesn't exist, use measure create instead",
        "Check syntax: measure modify id 1 radius 5.0"
      ]
    },
    {
      "issue": "Modified attributes don't show up in measure list",
      "solutions": [
        "Configuration changed but not recalculated",
        "Call model clean to recalculate",
        "Then measure list will show updated values",
        "Modification only changes config, not results"
      ]
    },
    {
      "issue": "Want to change measurement ID",
      "solutions": [
        "Cannot modify ID itself",
        "Use delete/create sequence:",
        "  measure delete range id 1",
        "  measure create id 2 <same config>",
        "Or keep existing ID if not critical"
      ]
    },
    {
      "issue": "Modifying position but results unchanged",
      "solutions": [
        "Configuration changed but not recalculated",
        "Call model clean to recalculate with new position",
        "New position may contain same or different bodies",
        "Verify with measure list after model clean"
      ]
    },
    {
      "issue": "Want to reset all attributes to defaults",
      "solutions": [
        "measure modify requires explicit values",
        "Easier to delete and recreate: measure delete, measure create",
        "Or manually specify all default values in modify"
      ]
    }
  ],

  "performance_considerations": {
    "modification_cost": "Very fast - just updates configuration",
    "no_recalculation": "measure modify does NOT trigger recalculation",
    "recalculation_cost": "model clean cost same as initial calculation",
    "recommendation": "Can modify freely; recalculate only when needed"
  },

  "multiple_attribute_modification": {
    "description": "Can modify multiple attributes in single command",
    "example": "measure modify id 1 radius 4.0 x 2.0 y 2.0 tolerance 0.001",
    "benefits": [
      "Single command for all changes",
      "Atomic update (all or nothing)",
      "Fewer commands to type"
    ],
    "recommendation": "Modify all needed attributes in one command for efficiency"
  },

  "tolerance_modification_effects": {
    "description": "How tolerance affects porosity calculation",
    "increase_tolerance": {
      "effect": "Faster calculation, slightly less accurate porosity",
      "example": "measure modify id 1 tolerance 0.05",
      "use_when": "Performance critical, rough estimates acceptable"
    },
    "decrease_tolerance": {
      "effect": "Slower calculation, more accurate porosity",
      "example": "measure modify id 1 tolerance 0.001",
      "use_when": "High precision required"
    },
    "note": "Must call model clean to see effect of tolerance change"
  },

  "bins_modification_effects": {
    "description": "How bins setting affects size distribution",
    "more_bins": {
      "effect": "Finer resolution, smoother distribution curve",
      "example": "measure modify id 1 bins 200 0.0 1.0",
      "use_when": "Detailed size distribution analysis"
    },
    "fewer_bins": {
      "effect": "Coarser resolution, rougher distribution curve",
      "example": "measure modify id 1 bins 20 0.0 1.0",
      "use_when": "Quick overview sufficient"
    },
    "note": "Export with measure dump to see size distribution data"
  },

  "radius_modification_effects": {
    "description": "How radius affects measurement",
    "larger_radius": {
      "effect": "Includes more bodies, averages over larger region",
      "example": "measure modify id 1 radius 10.0",
      "use_when": "Want bulk average properties"
    },
    "smaller_radius": {
      "effect": "Includes fewer bodies, more localized measurement",
      "example": "measure modify id 1 radius 1.0",
      "use_when": "Want local properties at specific point"
    },
    "note": "Recalculate with model clean to see effect"
  },

  "when_to_use_modify": {
    "good_use_cases": [
      "Adjusting measurement region size (radius)",
      "Moving measurement to different location (position)",
      "Refining porosity accuracy (tolerance)",
      "Changing size distribution resolution (bins)",
      "Fine-tuning existing measurement"
    ],
    "poor_use_cases": [
      "Changing measurement ID (use delete/create)",
      "Complete reconfiguration (delete/create may be clearer)",
      "Creating new measurement (use measure create)"
    ]
  }
}
